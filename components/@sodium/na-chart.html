<template>
  <div ref="chart"></div>
</template>

<script setup>
  import { Chart } from "https://unpkg.com/frappe-charts@1.6.1/dist/frappe-charts.esm.js";
  import { ref, watch, defineProps } from "@lithium/web";

  const props = defineProps(["data", "type", "options"]);
  const chart = ref(null);

  function onRender() {
    chart.value.innerHTML = "";
    new Chart(chart.value, {
      data,
      type: props.type || "line",
      ...(props.options || {}),
    });
  }

  watch(props.data, onRender);
  watch(props.type, onRender);
  watch(props.options, onRender);
</script>
